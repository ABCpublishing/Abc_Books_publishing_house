<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top 100 Books - ABC Books</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/styles-responsive.css">
    <link rel="stylesheet" href="../css/components/top100.css">
</head>

<body>
    <!-- Top Announcement Bar -->
    <div class="announcement-bar">
        <div class="container">
            <div class="announcement-content">
                <span><i class="fas fa-gift"></i> New Year Special: Extra 20% OFF on all orders! Use code:
                    <strong>NEWYEAR2025</strong></span>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <button class="mobile-menu-btn"><i class="fas fa-bars"></i></button>
                <a href="../index.html" class="logo">
                    <div class="logo-icon"><i class="fas fa-book-open"></i></div>
                    <div class="logo-text">
                        <span class="logo-main">ABC</span>
                        <span class="logo-sub">BOOKS</span>
                    </div>
                </a>

                <div class="search-wrapper">
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search books, authors, ISBN...">
                        <button class="search-btn">Search</button>
                    </div>
                </div>

                <div class="header-actions">
                    <a href="../index.html" class="action-btn">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </a>
                    <a href="#" class="action-btn">
                        <i class="fas fa-user-circle"></i>
                        <span>Account</span>
                    </a>
                    <a href="#" class="action-btn cart-btn">
                        <i class="fas fa-shopping-bag"></i>
                        <span>Cart</span>
                        <span class="badge">0</span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Mobile Navigation Sidebar -->
    <div class="mobile-nav-overlay" id="mobileNavOverlay"></div>
    <aside class="mobile-nav-sidebar" id="mobileNavSidebar">
        <div class="mobile-nav-header">
            <div class="logo">
                <div class="logo-icon"><i class="fas fa-book-open"></i></div>
                <div class="logo-text">
                    <span class="logo-main">ABC</span>
                    <span class="logo-sub">BOOKS</span>
                </div>
            </div>
            <button class="close-mobile-nav" id="closeMobileNav"><i class="fas fa-times"></i></button>
        </div>

        <div class="mobile-nav-content">
            <ul class="mobile-nav-list">
                <li><a href="../index.html"><i class="fas fa-home"></i> Home</a></li>
                <li class="mobile-dropdown-item">
                    <a href="#"><i class="fas fa-book"></i> Categories <i
                            class="fas fa-chevron-down dropdown-arrow"></i></a>
                    <ul class="mobile-submenu">
                        <li><a href="#">English Books</a></li>
                        <li><a href="#">Arabic Books</a></li>
                        <li><a href="#">Urdu Books</a></li>
                    </ul>
                </li>
                <li><a href="top100.html" class="active"><i class="fas fa-crown"></i> Top 100</a></li>
                <li><a href="search.html"><i class="fas fa-search"></i> Advanced Search</a></li>
                <li><a href="about.html"><i class="fas fa-info-circle"></i> About Us</a></li>
                <li><a href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
            </ul>
        </div>

        <div class="mobile-nav-footer">
            <a href="my-account.html" class="btn-mobile-auth"><i class="fas fa-user"></i> My Account</a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="top100-page">
        <div class="container">
            <!-- Page Header -->
            <div class="page-header">
                <div class="header-badge">
                    <span class="bw-badge">ABC</span>
                    <h1>TOP 100 BOOKS</h1>
                </div>
                <p class="header-subtitle">Discover the most popular and beloved books according to readers worldwide
                </p>
            </div>

            <!-- Books Grid -->
            <div class="top100-grid" id="top100BooksGrid">
                <!-- Books will be loaded dynamically -->
            </div>

            <!-- Loading State -->
            <div class="loading-state" id="loadingState">
                <i class="fas fa-book-open fa-spin"></i>
                <p>Loading amazing books...</p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-top">
            <div class="container">
                <div class="footer-grid">
                    <div class="footer-col brand-col">
                        <div class="footer-logo">
                            <div class="logo-icon"><i class="fas fa-book-open"></i></div>
                            <div class="logo-text">
                                <span class="logo-main">ABC</span>
                                <span class="logo-sub">BOOKS</span>
                            </div>
                        </div>
                        <p>India's most trusted online bookstore. Discover millions of books at unbeatable prices with
                            free shipping nationwide.</p>
                    </div>
                    <div class="footer-col">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href="../index.html">Home</a></li>
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Contact</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Customer Service</h4>
                        <ul>
                            <li><a href="#">My Account</a></li>
                            <li><a href="#">Track Order</a></li>
                            <li><a href="#">FAQs</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="container">
                <p>&copy; 2025 ABC Books. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <script src="../js/services/api.js"></script>
    <script src="../js/data/books-data.js"></script>
    <script src="../js/auth/user-auth-api.js"></script>
    <script src="../js/mobile-menu.js"></script>
    <script src="../js/script.js"></script>
    <script>
        // Load Top 100 Books
        async function loadTop100Books() {
            const grid = document.getElementById('top100BooksGrid');
            const loading = document.getElementById('loadingState');

            try {
                // Get custom books first
                const customData = getCustomBooksData();
                let books = [];

                if (customData && customData.sections && customData.sections.top100 && customData.sections.top100.length > 0) {
                    const bookIds = customData.sections.top100;
                    books = bookIds.map(id => customData.books.find(b => b.id === id)).filter(Boolean);
                    console.log(`ðŸ“˜ Loaded ${books.length} custom books from admin panel`);
                }

                // If no custom books, load from API
                if (books.length === 0) {
                    const apiBooks = await fetchBooksFromAPI(bookCategories.top100.query, bookCategories.top100.limit);
                    books = apiBooks;
                }

                loading.style.display = 'none';

                if (books.length > 0) {
                    grid.innerHTML = books.map((book, index) => `
                        <div class="top100-book-card">
                            <div class="book-rank">#${index + 1}</div>
                            <div class="book-image">
                                <img src="${book.image}" alt="${book.title}" onerror="this.src='https://via.placeholder.com/200x280?text=No+Image'">
                            </div>
                            <div class="book-info">
                                <h3 class="book-title">${book.title}</h3>
                                <p class="book-author">${book.author}</p>
                                <div class="book-rating">
                                    ${generateStars(book.rating)}
                                    <span>${book.rating}</span>
                                </div>
                                <div class="book-price">
                                    <span class="current-price">â‚¹${book.price}</span>
                                    <span class="original-price">â‚¹${book.originalPrice}</span>
                                </div>
                                <button class="add-to-cart-btn">
                                    <i class="fas fa-shopping-bag"></i> Add to Cart
                                </button>
                            </div>
                        </div>
                    `).join('');
                } else {
                    grid.innerHTML = '<p class="no-books">No books available at the moment.</p>';
                }
            } catch (error) {
                console.error('Error loading Top 100 books:', error);
                loading.innerHTML = '<p>Error loading books. Please try again later.</p>';
            }
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', loadTop100Books);
    </script>
</body>

</html>